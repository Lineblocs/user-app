!function(){"use strict";function t(t){return{restrict:"CA",scope:{data:"=",labels:"=",options:"=",series:"=",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=",hover:"="},link:function(r,a){var o,i=document.createElement("div");function l(e,i){if(!c(e)&&!angular.equals(e,i)){var l=t||r.chartType;l&&(o&&o.destroy(),o=n(l,r,a))}}i.className="chart-container",a.replaceWith(i),i.appendChild(a[0]),"object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement&&window.G_vmlCanvasManager.initElement(a[0]),r.$watch("data",function(i,l){if(i&&i.length&&(!Array.isArray(i[0])||i[0].length)){var c=t||r.chartType;if(c){if(o){if(function(t,n){if(t&&n&&t.length&&n.length)return Array.isArray(t[0])?t.length===n.length&&t[0].length===n[0].length:n.reduce(e,0)>0&&t.length===n.length;return!1}(i,l))return function(t,e,n){Array.isArray(n.data[0])?t.datasets.forEach(function(t,n){(t.points||t.bars).forEach(function(t,r){t.value=e[n][r]})}):t.segments.forEach(function(t,n){t.value=e[n]});t.update(),n.$emit("update",t)}(o,i,r);o.destroy()}o=n(c,r,a)}}},!0),r.$watch("series",l,!0),r.$watch("labels",l,!0),r.$watch("options",l,!0),r.$watch("colours",l,!0),r.$watch("chartType",function(t,e){c(t)||angular.equals(t,e)||(o&&o.destroy(),o=n(t,r,a))}),r.$on("$destroy",function(){o&&o.destroy()})}}}function e(t,e){return t+e}function n(t,e,n){if(e.data&&e.data.length){e.getColour="function"==typeof e.getColour?e.getColour:a,e.colours=function(t){var e=angular.copy(t.colours)||angular.copy(Chart.defaults.global.colours);for(;e.length<t.data.length;)e.push(t.getColour());return e.map(r)}(e);var o=n[0],i=o.getContext("2d"),l=Array.isArray(e.data[0])?function(t,e,n,r){return{labels:t,datasets:e.map(function(t,e){var a=angular.copy(r[e]);return a.label=n[e],a.data=t,a})}}(e.labels,e.data,e.series||[],e.colours):function(t,e,n){return t.map(function(t,r){return{label:t,value:e[r],color:n[r].strokeColor,highlight:n[r].pointHighlightStroke}})}(e.labels,e.data,e.colours),c=new Chart(i)[t](l,e.options||{});return e.$emit("create",c),["hover","click"].forEach(function(t){e[t]&&(o["click"===t?"onclick":"onmousemove"]=function(t,e,n){return function(r){var a=e.getPointsAtEvent||e.getBarsAtEvent||e.getSegmentsAtEvent;if(a){var o=a.call(e,r);t[n](o,r),t.$apply()}}}(e,c,t))}),e.legend&&"false"!==e.legend&&function(t,e){var n=t.parent(),r=n.find("chart-legend"),a="<chart-legend>"+e.generateLegend()+"</chart-legend>";r.length?r.replaceWith(a):n.append(a)}(n,c),c}}function r(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?o((e=t.substr(1),[(n=parseInt(e,16))>>16&255,n>>8&255,255&n])):a();var e,n}function a(){return o([i(0,255),i(0,255),i(0,255)])}function o(t){return{fillColor:l(t,.2),strokeColor:l(t,1),pointColor:l(t,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:l(t,.8)}}function i(t,e){return Math.floor(Math.random()*(e-t+1))+t}function l(t,e){return"rgba("+t.concat(e).join(",")+")"}function c(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}Chart.defaults.global.responsive=!0,Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",Chart.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"],angular.module("chart.js",[]).directive("chartBase",function(){return t()}).directive("chartLine",function(){return t("Line")}).directive("chartBar",function(){return t("Bar")}).directive("chartRadar",function(){return t("Radar")}).directive("chartDoughnut",function(){return t("Doughnut")}).directive("chartPie",function(){return t("Pie")}).directive("chartPolarArea",function(){return t("PolarArea")})}();