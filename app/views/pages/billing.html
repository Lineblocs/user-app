<div>

  <div layout="row" layout-align="end center" layout-margin>
      <div>
        <h5>Remaining Balance</h5>
        <strong>{{billing.info.remainingBalance}}</strong>
      </div>
    </div>

  <md-card md-theme="'default'"" md-theme-watch>
    <!--
    <md-card-title>
      <md-card-title-text>
        <span class="md-headline">User Settings</span>
        <span class="md-subhead">edit your settings</span>
      </md-card-title-text>
    </md-card-title>
  -->
    <md-card-content>
      <md-content>
      <md-tabs class="md-primary" md-center-tabs layout-fill md-dynamic-height="true">
        <md-tab label="Add Credit">
          <md-content class="md-padding">
            <p>
              To add credit please choose a payment option and select the credit amount you wish to
              add to your balance.
            </p>
                  <div ng-show="cards.length === 0">
                    <h5>No Cards Added</h5>
                    <md-button ng-click="addCard($event)" class="md-raised md-primary">Add A Card</md-button>

                  </div>
                  <div ng-show="cards.length > 0">
                    <h5>Use Existing Card</h5>
                    <div layout="row">
                      <div flex="">
                        <md-radio-group ng-model="data.selectedCard" ng-change="changeCard(data.selectedCard)">
                          <md-radio-button ng-repeat="card in cards"
                                          ng-value="card.id"
                                          aria-label="{{createLabel(card)}}">
                              <label>{{createLabel(card)}}</label>
                              <md-icon md-svg-icon="{{getCardIcon(card)}}"></md-icon>
                          </md-radio-button>
                          <md-radio-button ng-value="'new'" aria-label="Add New Card">
                              <label>Add New Card</label>
                              <md-icon md-svg-icon="{{getCardIcon(card)}}"></md-icon>
                          </md-radio-button>
                        </md-radio-group>
                      </div>
                    </div>
                      <div ng-show="settings.newCard">
 <form ng-cloak ng-submit="submit()">
   <md-content>
      <md-input-container>
          <label>Your Name</label>
          <input ng-model="card.name"/>
        </md-input-container>
        <md-input-container>
          <label>Address</label>
          <input ng-model="card.address"/>
        </md-input-container>
        <div layout="row">
          <div flex>
          <md-input-container>
              <label>City</label>
              <input ng-model="card.city"/>
            </md-input-container>
          </div>
          <div flex>
            <md-input-container>
              <label>Postal Code</label>
              <input ng-model="card.postal_code"/>
            </md-input-container>
          </div>
          <div flex>
            <md-input-container>
              <label>Country</label>
              <md-select ng-model="card.country" ng-change="changeCountry(card.country)">
                <md-option ng-repeat="country in SharedPref.billingCountries" ng-value="country">
                  {{country.name}}
                </md-option>
              </md-select>
            </md-input-container>
          </div>
        </div>
        <h5>Card Details</h5>
        <div layout="row">
          <div flex>
          <md-input-container>
              <label>Number</label>
              <input ng-model="card.number"/>
            </md-input-container>
          </div>
          <div flex>
            <md-input-container>
              <label>Expires</label>
              <input placeholder="MM/YY" ng-model="card.expires"/>
            </md-input-container>
          </div>
          <div flex>
            <md-input-container>
              <label>CVV</label>
              <input ng-model="card.cvv" />
            </md-input-container>
          </div>
        </div>
      </div>
    </md-content>
  </form>

                  </div>
                    <md-input-container>
                      <label>Add credit Amount</label>
                      <md-select ng-model="data.creditAmount" ng-change="changeAmount(data.creditAmount)">
                        <md-option ng-repeat="amount in creditAmounts" ng-value="amount">
                          {{amount.name}}
                        </md-option>
                      </md-select>
                    </md-input-container>
                  <md-button ng-click="addCredit($event)" class="md-raised md-primary">Add Credit</md-button>
          </md-content>
        </md-tab>
        <md-tab label="History">
          <md-content class="md-padding">
            <h5>Account Balance {{billing.info.accountBalance}}</h5>
            <small>
              finalized invoices and payments
            </small>
            <h5>Charges This Month {{billing.info.chargesThisMonth}}</h5>
            <small>
              invoiced {{billing.info.nextInvoiceDue}}
            </small>
            <h5>Estimated Balance {{billing.info.estimatedBalance}}</h5>
            <small>
              balance including charges this month.
            </small>
            <h5>History</h5>
<md-table-container>
      <table md-table md-row-select multiple ng-model="selected" md-progress="promise">
        <thead md-head md-order="query.order" md-on-reorder="getDesserts">
          <tr md-row>
            <th md-column md-order-by="nameToLower"><span>Source</span></th>
            <th md-column>Amount</th>
            <th md-column>Balance</th>
            <th md-column>Date/Time</th>
            <th md-column>&nbsp;</th>
          </tr>
        </thead>
        <tbody md-body>
          <tr md-row md-select="number" md-select-id="name" md-auto-select ng-repeat="item in history">
            <td md-cell>{{item.type}}</td>
            <td md-cell>{{item.cents}}</td>
            <td md-cell>{{item.balance}}</td>
            <td md-cell>{{item.created_at}}</td>
            <td md-cell>{{item.status}}</td>
          </tr>
        </tbody>
      </table>
    </md-table-container>

            </md-content>
            </md-tab>
    <md-tab label="Limits">
          <md-content class="md-padding">
              <h5>Maximum Concurrent Calls: {{billing.info.limits.ports}}</h5>
              <br/>
              <h5>Extensions: {{billing.info.limits.extensions}}</h5>
              <br/>
              <h5>Recording Space: {{billing.info.limits.recording_space}}</h5>
              <br/>
              <h5>Numbers: {{billing.info.limits.numbers}}</h5>
            </md-content>
            </md-tab>
        <md-tab label="Settings">
          <md-content class="md-padding">
            <!--
            <p>
              use the following settings to configure your billing according to your needs
            </p>
          -->

            <md-checkbox ng-model="settings.auto_recharge" aria-label="Auto Recharge">
              Auto Recharge Account
            </md-checkbox>
            <p>when your account is in negative balance we will automatically add balance for you</p>
            <div ng-show="settings.auto_recharge">
              <md-input-container>
                <label>Auto Recharge Amount</label>
                    <md-select ng-model="settings.auto_recharge_top_up" ng-change="changeAutoRechargeAmount(settings.auto_recharge_top_up)">
                      <md-option ng-repeat="amount in creditAmounts" ng-value="amount">
                        {{amount.name}}
                      </md-option>
                    </md-select>
                  </md-input-container>
              <p>Amount to add when your account is in negative balance</p>
            </div>
             <md-button ng-click="saveSettings($event)" class="md-raised md-primary">Save Settings</md-button>
      </md-tabs>
  </md-card>
</div>